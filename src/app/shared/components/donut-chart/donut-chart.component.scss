.donut-chart {
  // Layout: Ring and Content are stacked via Grid
  // This allows us to have the content as a SIBLING of the ring, preventing
  // accessibility tools from seeing the ring's pseudo-element as an ancestor background.
  position: relative;
  display: grid;
  place-items: center;
  // Ensure size is constrained by the ring
  width: min-content;

  // SIZES
  &--sm {
    --size: 64px;
    --font-size: var(--font-size-lg);
    --thickness: 6px;
  }

  &--md {
    --size: 96px;
    --font-size: var(--font-size-2xl);
    --thickness: 8px;
  }

  &--lg {
    --size: 128px;
    --font-size: var(--font-size-4xl);
    --thickness: 10px;
  }

  // VARIANTS
  &--primary {
    --chart-color: var(--color-primary);
  }

  &--secondary {
    --chart-color: var(--color-secondary);
  }

  &--accent {
    --chart-color: var(--color-accent);
  }

  &--success {
    --chart-color: var(--color-success);
  }

  &--warning {
    --chart-color: var(--color-warning);
  }

  &--error {
    --chart-color: var(--color-error);
  }

  // RING (The Donut)
  &__ring {
    // Occupy same grid cell (row 1, col 1)
    grid-area: 1 / 1;

    position: relative;
    width: var(--size);
    height: var(--size);
    border-radius: 50%;
    // Base circle (background track)
    background: var(--color-surface-variant);

    // Conic Gradient for the progress
    &::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: conic-gradient(var(--chart-color) var(--percent), transparent 0);
    }
  }

  // CONTENT (Center Hole)
  &__content {
    // Occupy same grid cell, effectively stacking on top
    grid-area: 1 / 1;

    // Size is ring size minus thickness (times 2 for both sides)
    width: calc(var(--size) - (var(--thickness) * 2));
    height: calc(var(--size) - (var(--thickness) * 2));

    // Explicit background matching the card surface creates the "hole" illusion
    background: var(--color-surface);
    border-radius: 50%;

    display: flex;
    align-items: center;
    justify-content: center;

    // Sit on top of the ring
    z-index: 1;
  }

  &__value {
    font-size: var(--font-size);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    // Explicit background for accessibility tools (still good practice)
    background-color: var(--color-surface, #ffffff);
  }

  &__label {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-medium);
    text-align: center;
    white-space: nowrap;
    // Since we are using grid on parent, ensure label is in row 2?
    // Actually, 'gap' on parent handles it if we are flexible.
    // But parent is 'display: grid; place-items: center'.
    // If we want label below, we need a column layout or the label needs to be outside the grid cell 1/1.
    // Let's force layout:
    // By defaults items flow automatically.
    // Ring and Content are forced to 1/1.
    // Label will flow to next available slot (row 2).
  }
}
