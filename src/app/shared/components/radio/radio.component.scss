.radio-wrapper {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  position: relative;
  width: 100%;

  &--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  // Size variants (defines --radio-size for all children)
  &--sm {
    --radio-size: 16px;
  }

  &--md {
    --radio-size: 20px;
  }

  &--lg {
    --radio-size: 24px;
  }
}

.radio__wrapper {
  display: inline-flex;
  align-items: center;
  position: relative;
  width: min-content;
  height: min-content;

  eb-radio-button-icon {
    display: block;
    width: var(--radio-size, 20px);
    height: var(--radio-size, 20px);
    pointer-events: none;
    z-index: 10;
    color: var(--color-text-secondary); // Default unchecked color
  }
}

// Native input styling (visually hidden but accessible)
.radio {
  appearance: none;
  position: absolute;
  width: var(--radio-size, 20px);
  height: var(--radio-size, 20px);
  margin: 0;
  padding: 0;
  opacity: 0;
  cursor: pointer;
  z-index: 20; // Above the icon so it receives clicks

  &:disabled,
  &--disabled,
  &[aria-disabled='true'] {
    cursor: not-allowed;
    pointer-events: none;
  }

  // Focus styles applied to sibling icon when input is focused
  &:focus-visible + eb-radio-button-icon {
    outline: var(--border-width-medium) solid var(--color-primary);
    outline-offset: var(--border-width-medium);
    border-radius: var(--border-radius-half);
  }

  // Hover styles
  &:not(:disabled):hover + eb-radio-button-icon {
    color: var(--color-primary);
  }

  // Validation states for focus
  &.radio--success:focus-visible + eb-radio-button-icon {
    outline-color: var(--color-success);
  }

  &.radio--warning:focus-visible + eb-radio-button-icon {
    outline-color: var(--color-warning);
  }

  &.radio--error:focus-visible + eb-radio-button-icon {
    outline-color: var(--color-error);
  }

  // Checked state coloring
  &:checked + eb-radio-button-icon,
  &.radio--checked + eb-radio-button-icon {
    color: var(--color-primary);
  }

  // Validation coloring for checked/unchecked states
  &.radio--success:checked + eb-radio-button-icon,
  &.radio--success + eb-radio-button-icon {
    color: var(--color-success);
  }

  &.radio--warning:checked + eb-radio-button-icon,
  &.radio--warning + eb-radio-button-icon {
    color: var(--color-warning);
  }

  &.radio--error:checked + eb-radio-button-icon,
  &.radio--error + eb-radio-button-icon {
    color: var(--color-error);
  }

  // Touch targets
  @media (pointer: coarse) {
    min-width: 44px;
    min-height: 44px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
}

.radio-label {
  padding-left: var(--space-2);
  margin-left: var(--space-2);
  cursor: pointer;

  &--disabled {
    cursor: not-allowed;
  }

  &--required::after {
    content: ' *';
    color: var(--color-error);
  }
}

.radio__helper-text {
  margin-top: var(--space-1);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  padding-left: calc(var(--radio-size, 20px) + var(--space-2));

  &--success {
    color: var(--color-success);
  }

  &--warning {
    color: var(--color-warning);
  }

  &--error {
    color: var(--color-error);
  }
}
