<eb-container>
  <ng-container *transloco="let t">
    <eb-stack spacing="lg">
      <header class="architecture__header">
        <h1 class="architecture__title">{{ t('architecture.title') }}</h1>
        <p class="architecture__subtitle">{{ t('architecture.subtitle') }}</p>
      </header>

      <!-- Search Section -->
      <div class="architecture__search">
        <eb-input
          [value]="searchValue()"
          (valueChange)="onSearchChange($event)"
          [placeholder]="t('architecture.searchPlaceholder')"
          [ariaLabel]="t('architecture.searchLabel')"
          type="search"
          inputId="adr-search"
        >
        </eb-input>
        @if (store.filter()) {
          <span class="architecture__search-count">
            {{ t('architecture.resultsCount', { count: store.filteredAdrs().length }) }}
          </span>
        }
      </div>

      <!-- Loading State -->
      @if (store.isLoading()) {
        <div class="architecture__loading">
          {{ t('common.loading') }}
        </div>
      }

      <!-- Error State -->
      @if (store.error()) {
        <div class="architecture__error">
          {{ store.error() }}
        </div>
      }

      <!-- ADR Grid -->
      @if (!store.isLoading() && !store.error()) {
        @if (store.filteredAdrs().length > 0) {
          <eb-grid [cols]="1" [colsMd]="2" [colsLg]="3" gap="lg">
            @for (adr of store.filteredAdrs(); track adr.id) {
              <a [routerLink]="['/architecture', adr.id]" class="adr-card-link">
                <eb-card class="adr-card" [hoverable]="true">
                  <eb-stack card-body spacing="sm">
                    <div class="adr-card__header">
                      <span class="adr-card__number">{{ adr.number }}</span>
                      <eb-badge
                        [variant]="getStatusVariant(adr.status)"
                        [content]="t('architecture.statuses.' + adr.status)"
                        [ariaLabel]="
                          t('architecture.statusLabel', {
                            status: t('architecture.statuses.' + adr.status),
                          })
                        "
                        position="inline"
                      ></eb-badge>
                    </div>
                    <h3 class="adr-card__title">
                      {{ t('architecture.data.' + adr.id + '.title') }}
                    </h3>
                    <p class="adr-card__summary">
                      {{ t('architecture.data.' + adr.id + '.summary') }}
                    </p>
                    <div class="adr-card__footer">
                      <span class="adr-card__date">{{ adr.date }}</span>
                      <eb-icon [name]="ICONS.CHEVRON_RIGHT" size="sm" [decorative]="true"></eb-icon>
                    </div>
                  </eb-stack>
                </eb-card>
              </a>
            }
          </eb-grid>
        } @else {
          <div class="architecture__empty">
            <eb-icon
              [name]="ICONS.SEARCH"
              size="xl"
              class="architecture__empty-icon"
              [decorative]="true"
            ></eb-icon>
            <h2 class="architecture__empty-title">{{ t('architecture.noResults') }}</h2>
            <p class="architecture__empty-text">{{ t('architecture.noResultsHint') }}</p>
            @if (store.filter()) {
              <eb-button
                variant="secondary"
                [ariaLabel]="t('architecture.clearSearch')"
                (click)="clearSearch()"
              >
                {{ t('architecture.clearSearch') }}
              </eb-button>
            }
          </div>
        }
      }
    </eb-stack>
  </ng-container>
</eb-container>
